<div class="app-layout">
  <!-- Mobile Sidebar Overlay -->
  <div *ngIf="isLoggedIn" 
       class="sidebar-overlay" 
       [class.show]="sidebarExpanded"
       (click)="closeMobileSidebar()"
       (touchstart)="closeMobileSidebar()"></div>

  <!-- Sidebar -->
  <div *ngIf="isLoggedIn" class="sidebar-wrapper" [class.sidebar-expanded]="sidebarExpanded">
    <app-sidebar (sidebarToggle)="onSidebarToggle($event)"></app-sidebar>
  </div>

  <!-- Main Content Area -->
  <div class="main-content" [class.content-expanded]="!isLoggedIn || !sidebarExpanded">
    <!-- Top Navigation -->
    <header *ngIf="isLoggedIn" class="topbar">
      <app-nav-bar 
        [sidebarExpanded]="sidebarExpanded"
        (sidebarToggle)="onSidebarToggle($event)">
      </app-nav-bar>
    </header>

    <!-- Page Content -->
    <main class="page-content">
      <div class="container-fluid">
        <router-outlet></router-outlet>
      </div>
    </main>

    <!-- Footer -->
    <footer class="app-footer">
      <app-footer></app-footer>
    </footer>
  </div>

  <!-- Loading Overlay -->
  <app-loading-spinner [show]="isLoading" [message]="loadingMessage"></app-loading-spinner>
</div>