<nav class="modern-navbar">
  <div class="navbar-container">
    <!-- Left side - Mobile sidebar toggle and breadcrumb -->
    <div class="navbar-left">
      <button class="mobile-sidebar-toggle d-lg-none" 
              (click)="toggleSidebar()"
              (touchstart)="$event.preventDefault()"
              [attr.aria-label]="sidebarExpanded ? 'Close menu' : 'Open menu'"
              [attr.aria-expanded]="sidebarExpanded">
        <i [class]="sidebarExpanded ? 'ri-close-line' : 'ri-menu-line'"></i>
      </button>
      
      <!-- Navigation actions -->
      <div class="nav-actions d-none d-md-flex">
        <button class="nav-action-btn" (click)="goBack()" title="Go Back">
          <i class="ri-arrow-left-line"></i>
        </button>
        <button class="nav-action-btn" (click)="goForward()" title="Go Forward">
          <i class="ri-arrow-right-line"></i>
        </button>
      </div>

      <!-- Search Bar -->
      <div class="search-container d-none d-lg-flex">
        <div class="search-input-wrapper">
          <i class="ri-search-line search-icon"></i>
          <input type="text" 
                 class="search-input" 
                 placeholder="Search anything..."
                 #searchInput>
          <kbd class="search-shortcut">Ctrl K</kbd>
        </div>
      </div>
    </div>

    <!-- Right side - Actions and user menu -->
    <div class="navbar-right">
      <!-- Quick Actions -->
      <div class="quick-actions d-none d-md-flex">
        <button class="quick-action-btn" 
                (click)="openAddCustomerModal()" 
                title="Add Customer">
          <i class="ri-user-add-line"></i>
        </button>
        <button class="quick-action-btn" 
                (click)="openAddItemModal()" 
                title="Add Item">
          <i class="ri-add-box-line"></i>
        </button>
        <button class="quick-action-btn" 
                routerLink="/create-invoice" 
                title="Create Invoice">
          <i class="ri-file-add-line"></i>
        </button>
      </div>

      <!-- Notifications -->
      <div class="notification-wrapper">
        <button class="notification-btn" title="Notifications">
          <i class="ri-notification-3-line"></i>
          <span class="notification-badge">3</span>
        </button>
      </div>

      <!-- Theme Toggle -->
      <button class="theme-toggle-btn" 
              (click)="toggleTheme()" 
              [attr.title]="currentTheme === 'light' ? 'Switch to Dark Mode' : 'Switch to Light Mode'"
              [attr.aria-label]="currentTheme === 'light' ? 'Switch to Dark Mode' : 'Switch to Light Mode'">
        <i [class]="currentTheme === 'light' ? 'ri-moon-line' : 'ri-sun-line'"></i>
      </button>

      <!-- User Menu -->
      <div class="user-menu dropdown">
        <button class="user-menu-btn" 
                id="userMenuDropdown"
                data-bs-toggle="dropdown" 
                aria-expanded="false"
                title="User Menu">
          <img [src]="getCurrentUser().avatar" 
               [alt]="getCurrentUser().name" 
               [title]="getCurrentUser().name"
               class="user-avatar">
          <div class="user-info d-none d-md-block">
            <div class="user-name">{{ getCurrentUser().name }}</div>
            <div class="user-role">Administrator</div>
          </div>
          <i class="ri-arrow-down-s-line user-dropdown-arrow"></i>
        </button>

        <ul class="dropdown-menu dropdown-menu-end user-dropdown-menu">
          <li class="dropdown-header">
            <div class="user-profile-info">
              <img [src]="getCurrentUser().avatar" 
                   [alt]="getCurrentUser().name" 
                   [title]="getCurrentUser().name"
                   class="user-profile-avatar">
              <div>
                <div class="user-profile-name">{{ getCurrentUser().name }}</div>
                <div class="user-profile-email">{{ getCurrentUser().email }}</div>
              </div>
            </div>
          </li>
          <li><hr class="dropdown-divider"></li>
          <li>
            <a class="dropdown-item" href="#" title="Profile Settings">
              <i class="ri-user-line me-2"></i>
              Profile
            </a>
          </li>
          <li>
            <a class="dropdown-item" href="#" title="Account Settings">
              <i class="ri-settings-3-line me-2"></i>
              Settings
            </a>
          </li>
          <li>
            <a class="dropdown-item" href="#" title="Help & Support">
              <i class="ri-question-line me-2"></i>
              Help
            </a>
          </li>
          <li><hr class="dropdown-divider"></li>
          <li>
            <button class="dropdown-item text-danger" 
                    (click)="signOut()" 
                    title="Sign Out">
              <i class="ri-logout-box-line me-2"></i>
              Sign Out
            </button>
          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>